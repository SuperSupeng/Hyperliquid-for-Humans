# **产品需求文档（PRD）**

## 📘 项目信息

| 项目名称 | HL 小白看市（Hyperliquid for Humans） |
| -------- | ------------------------------------ |
| 文档版本 | v1.2                                 |
| 更新时间 | 2025-01-03                           |
| 产品负责人 | ——                                   |
| 开发负责人 | ——                                   |
| 目标阶段 | MVP（信息层 + 理解层）                |
| 状态     | 需求确认                           |

---

## 1. 背景与动机

在 Web3 与 DeAI 的融合浪潮中，市场数据逐渐成为开放的“世界信号”。
越来越多的 AI 开发者、内容创作者、普通用户希望“**理解市场变化**”，而非“参与投机交易”。

然而当前的行情类产品（如交易所看板、K线终端）存在以下问题：

| 问题    | 描述                |
| ----- | ----------------- |
| 专业门槛高 | K线、指标等信息对新手不友好    |
| 信息碎片化 | 用户看到涨跌，却不明白“为什么”  |
| 缺乏解释层 | 现有工具提供结果，不解释原因    |
| 情绪负担重 | 红绿跳动刺激焦虑，用户容易FOMO |

因此我们希望打造一款“**解释型市场观察工具**”，
让普通人也能理解市场的节奏、温度和原因。

---

## 2. 产品目标

### 🎯 产品愿景

> **让非专业用户在10秒内理解市场正在发生什么，以及为什么会这样。**

### 🧭 核心目标

| 目标      | 说明                           |
| ------- | ---------------------------- |
| **信息层** | 实时展示市场主要变化，用自然语言摘要代替专业术语     |
| **理解层** | 提供简单可解释的指标，让用户理解“为什么”市场会有此表现 |
| **情绪层** | 通过中性视觉和友好文案，降低信息焦虑、建立理解信心    |

---

## 3. 用户研究与洞察

### 3.1 用户画像

| 类型                | 特征          | 目标             | 痛点          |
| ----------------- | ----------- | -------------- | ----------- |
| **AI / DeAI 开发者** | 技术背景强，对交易不熟 | 想理解市场趋势与技术情绪   | 工具复杂、缺乏语义解释 |
| **内容创作者 / KOL**   | 对市场话题敏感     | 想知道“为什么大家在聊这个” | 市场数据难读懂     |
| **普通观察者**         | 无投资经验       | 想了解行情温度        | 容易被专业术语劝退   |

---

### 3.2 用户动机层次模型

| 层级      | 用户问题    | 用户心理            | 产品目标        |
| ------- | ------- | --------------- | ----------- |
| **信息层** | 发生了什么？  | “今天涨还是跌？”       | 一句话行情摘要     |
| **理解层** | 为什么会这样？ | “市场热是因为消息？成交多？” | 因果解释 + 指标卡片 |
| **情绪层** | 我该怎么理解？ | “现在是冷静还是躁动？”    | 中性视觉 + 提示引导 |

> 小白看市的核心不是“操作”，而是“理解”与“安心”。

---

## 4. 产品定位

| 维度   | 我们的定义               |
| ---- | ------------------- |
| 产品类型 | Web 端轻量实时数据可视化工具    |
| 用户定位 | 非交易型观察用户（AI、创作者、小白） |
| 功能定位 | 市场解读 + 数据解释 + 情绪可视化 |
| 价值主张 | “帮你理解市场，不必成为交易员。”   |

---

## 5. 核心功能模块

### 5.1 一句话市场摘要

**功能说明**：用最通俗的话告诉你市场现在怎么样，就像朋友在跟你聊天。

**显示效果示例**：
- `BTC 过去 1 小时小幅上行（+0.6%），波动偏低，成交偏活跃。`
- `ETH 过去 1 小时有所回落（-0.3%），波动正常，成交清淡。`

**我们怎么判断的**：

| 我们看什么 | 什么意思 | 怎么表达 |
| ---------- | -------- | -------- |
| **价格方向** | 整体是涨还是跌 | 上行/下行/横盘 |
| **价格跳动程度** | 价格变化是否剧烈 | 波动偏低/正常/上升 |
| **交易热度** | 大家交易多不多 | 成交清淡/正常/偏活跃 |

**用户可以做什么**：
- 切换看不同时间段：最近 15 分钟、1 小时、24 小时
- 页面自动刷新，有重要变化立即告诉你

---

### 5.2 三个大卡片：帮你快速看懂市场

我们用三个大卡片展示市场的关键信息，每一个都很简单易懂：

**卡片 1：价格方向**
- 显示分数从 -5 到 +5
- -5 到 -2：明显下跌
- -2 到 -0.5：小幅下跌
- -0.5 到 +0.5：横盘整理
- +0.5 到 +2：小幅上涨
- +2 到 +5：明显上涨
- 简单解释："分数越高，说明整体趋势越往上走"

**卡片 2：价格跳动程度**
- 显示等级从 1 到 5
- 1级：极稳定（价格几乎不动）
- 2级：较稳定
- 3级：正常跳动
- 4级：比较剧烈
- 5级：剧烈波动（价格上蹿下跳）
- 简单解释："当很多人同时买卖时，价格容易跳动得更厉害"

**卡片 3：市场热度**
- 显示等级从 1 到 5
- 1级：冷淡（没什么人交易）
- 2级：偏冷
- 3级：正常
- 4级：活跃（很多人交易）
- 5级：火热（交易非常频繁）
- 简单解释："交易人多的时候，市场更容易有大的波动"

> 每个卡片旁边都有小提示，帮你理解这个数字到底什么意思。

---

### 5.3 "为什么会这样"解释

**功能说明**：当市场有明显变化时，我们会主动告诉你可能的原因，帮你理解"到底发生了什么"。

**什么时候会显示**：当任何指标突然变化超过正常范围时，会自动弹出解释。

**可能会看到的情况**：

| 你看到的现象 | 可能的原因 | 我们怎么告诉你 |
| ------------ | ---------- | -------------- |
| **价格跳动突然变大** | 有很多人在交易 | "价格跳动变大了，可能是因为交易的人变多了，说明市场现在比较敏感" |
| **价格跳动突然变小** | 很少有人交易 | "价格跳动变小了，可能是因为交易的人少了，说明市场现在比较平静" |
| **交易突然变多** | 市场吸引了很多注意力 | "交易突然变多了，说明很多人都关注这个市场" |
| **涨跌方向突然改变** | 有大额交易或者重大消息 | "价格方向突然变了，可能是有人大额买卖，或者有重要消息传出来" |
| **买卖价差变大** | 愿意买卖的人少了，市场变谨慎 | "买卖价差变大了，说明愿意交易的人少了，市场进入了谨慎状态" |

**我们的表达方式**：
用最简单的话说明因果关系，比如"因为 A，所以 B"，然后总结一下现在的市场状态。

---

### 5.4 价格走势图

**功能说明**：用一个简单的曲线图展示最近的价格走势，帮你直观地看到"价格是怎么变的"。

**你能看到什么**：
- 一条流畅的曲线，显示价格的上下波动
- 用温和的颜色（灰蓝色或浅绿色），不会让你感到紧张
- 鼠标悬停时，会显示具体数字（最高价、最低价、当前价）

**可以切换时间**：
- 最近 15 分钟：看超短期波动
- 最近 1 小时：看短期趋势
- 最近 24 小时：看一天的整体走势

**特点**：
- 每 10 秒自动更新，保证信息新鲜
- 设计简洁，不显示那些复杂的线条和阴影
- 加载很快，不会卡顿

---

### 5.5 温馨提示区

**功能说明**：当市场出现特殊状态时，我们会友好地提醒你，并给出简单的建议。

**可能会出现的情况**：

| 市场状态 | 你可能会看到 | 我们的建议 |
| -------- | ------------ | ---------- |
| **非常不稳定** | "⚠️ 价格跳动变得特别大了，市场现在不够稳定" | "建议先观察一下，不要急着做决定" |
| **市场很躁动** | "💡 市场现在很活跃，很多人都在交易" | "保持理性，不要被情绪带着走" |
| **市场很平静** | "🔵 市场现在很平静，交易的人不多" | "市场暂时在休息，方向还不明确" |
| **价格不上不下** | "⚪ 价格在横盘，可能是在等待方向" | "可以等市场有明确方向再观察" |
| **突然快速变化** | "⚡ 市场突然快速变化了" | "短期内可能波动比较大，注意观察" |
| **买卖价差很大** | "❗ 愿意交易的人少了，买卖价差变大了" | "市场变得谨慎了" |

**显示原则**：
- 如果同时出现多个情况，我们只显示最重要的那个
- 情况恢复正常后，提示会在 3 分钟内自动消失
- 我们用温和的、朋友般的语气，绝不会吓唬你

---

### 5.6 用词说明

**我们的原则**：直接从最开始就用最简单的词，不让专业术语吓到你。

**你可能在其他地方看到的词 vs 我们的表达**：

| 其他地方可能这么说 | 我们怎么说 | 什么意思 |
| ------------------ | ---------- | -------- |
| "趋势" | 价格方向 | 整体是往上、往下还是横着走 |
| "波动" | 价格跳动 | 价格变化得厉不厉害 |
| "活跃度" | 交易热度 | 现在交易的人多不多 |
| "点差" | 买卖价差 | 想买的人和想卖的人的价格差距 |
| "流动性" | 市场深度 | 市场上买卖的人多不多 |

**未来会更好**：后续版本可能会增加"学习模式"，点击任何词汇都能看到详细解释。

---

### 5.7 选择你想看的市场

**你可以做什么**：

**搜索市场**：
- 输入币种名称或代码，比如 "BTC" 或 "比特"
- 支持拼音搜索，打字方便
- 可以搜索 Hyperliquid 上所有支持的市场

**收藏功能**：
- 点击星标，把你关心的市场收藏起来
- 最多收藏 10 个，随时可以取消
- 收藏列表保存在你的浏览器里，下次打开还在

**快速切换**：
- 顶部显示收藏列表和最近看过的市场
- 点击就能切换，几乎无延迟
- 切换时显示一个小动画，感觉流畅

**默认设置**：
- 第一次打开默认显示 BTC/USD（比特币）
- 会记住你上次看的是哪个市场
- 切换市场时，你选择的"时间窗口"不会变（比如你选了"1小时"，切换后还是看"1小时"）

---

## 6. 交互与体验设计

### 6.1 页面结构

```
┌──────────────────────────────┐
│ 顶栏：Logo + 市场选择         │
├──────────────────────────────┤
│ 一句话摘要（大号字体，居中）   │
├──────────────────────────────┤
│ 三指标卡片（趋势/波动/活跃） │
│ 并列显示，响应式布局           │
├──────────────────────────────┤
│ 火花线走势 + 时间窗口切换     │
├──────────────────────────────┤
│ 风险与提示区（按需显示）       │
├──────────────────────────────┤
│ 页脚：免责声明 + 数据来源     │
└──────────────────────────────┘
```

**页面尺寸**：
- 桌面端：最大宽度 1200px，居中显示
- 移动端：全宽响应式，指标卡片垂直堆叠

### 6.2 我们的设计理念

| 原则     | 我们用简单的话说就是 |
| -------- | -------------------- |
| **说人话** | 所有信息都用大白话，不用专业术语 |
| **不吓唬人** | 颜色温和，不故意制造紧张感 |
| **只观察不交易** | 我们不做交易入口，只帮你理解市场 |
| **实时更新** | 数据自动刷新，有变化马上告诉你 |
| **解释清楚** | 每个数字都有小提示，告诉你"这是什么意思" |

---

## 7. 数据与技术架构

### 7.1 数据来源

| 类型     | 来源                          | 用途       |
| ------ | --------------------------- | -------- |
| 市场列表   | Hyperliquid REST `/markets` | 获取资产信息   |
| 实时价格   | Hyperliquid WS              | 实时更新     |
| 成交量/点差 | REST + WS                   | 活跃度与波动计算 |

### 7.2 模块划分

| 模块                 | 职责              | 关键函数/类 |
| ------------------ | --------------- | --------- |
| Data Layer         | 数据订阅、缓存与更新      | `useMarketData`, `WebSocketManager` |
| Analytics Layer    | 趋势 / 波动 / 活跃度计算 | `calcTrend`, `calcVolatility`, `calcActivity` |
| Explanation Engine | 生成"为什么会这样"的解释   | `generateExplanation`, `detectAnomaly` |
| UI Layer           | 前端组件与可视化渲染      | `Sparkline`, `IndicatorCard`, `Summary` |

### 7.3 技术栈

| 类别 | 技术选型 | 版本要求 | 原因 |
| ---- | -------- | -------- | ---- |
| 前端框架 | Next.js | ^14.0 | SSR + API 路由一体化 |
| 语言 | TypeScript | ^5.0 | 类型安全，降低运行时错误 |
| 样式 | Tailwind CSS | ^3.4 | 快速原型，响应式友好 |
| 状态管理 | Zustand | ^4.5 | 轻量，API 简洁 |
| 数据获取 | SWR | ^2.2 | 自动缓存与重验证 |
| 图表 | 自实现 SVG | - | 轻量级，无依赖 |
| WebSocket | ws (Node) / 原生 WS (浏览器) | - | 实时数据订阅 |
| 部署 | Vercel | - | 零配置部署，边缘网络 |

### 7.4 数据流架构

```
Hyperliquid API
    ↓
WebSocket Manager (自动重连 + 心跳)
    ↓
Data Cache (环形缓冲区，保留历史数据)
    ↓
Analytics Engine (实时计算指标)
    ↓
Zustand Store (状态管理)
    ↓
React Components (UI 渲染)
```

**关键设计点**：
- **环形缓冲区**：固定大小（如 1440 个点），自动淘汰旧数据
- **计算优化**：增量计算，避免全量重算
- **降级策略**：WebSocket 断开时自动切换到 REST 轮询
- **心跳检测**：每 30 秒发送 ping，确保连接活跃

---

## 8. 技术实现细节（开发者必读）

> **注意**：这一章的内容非常技术化，只有开发人员需要看。如果你是普通用户或产品经理，可以跳过这一章。

### 8.1 一句话市场摘要的算法实现

**核心算法**：

| 维度 | 计算方法 | 判断阈值 |
| ---- | -------- | -------- |
| **趋势判断** | 线性回归斜率计算过去 N 个价格点 | 斜率 > 0.01% 为上行<br>斜率 < -0.01% 为下行<br>否则为横盘 |
| **波动计算** | 对数收益标准差（σ）与历史平均对比 | 高于 1.5σ → "波动上升"<br>低于 0.7σ → "波动偏低"<br>0.7-1.5σ → "波动正常" |
| **成交活跃度** | 当前成交量与过去 24h 均值比较 | 高于 1.2 倍 → "成交偏活跃"<br>低于 0.8 倍 → "成交清淡"<br>0.8-1.2 倍 → "成交正常" |
| **时间窗口** | 默认 1h，可切换 15m / 1h / 24h | 用户可手动切换 |
| **更新频率** | 每 30 秒重新计算（或价格变动 > 1%） | 避免过于频繁刷新 |

**文案模板**：
- 上行模板：`{币种} 过去 {时间} {趋势描述}（{涨跌幅}），{波动描述}，{成交描述}。`
- 下行模板：`{币种} 过去 {时间} 有所回落（{涨跌幅}），{波动描述}，{成交描述}。`
- 横盘模板：`{币种} 过去 {时间} 波动较小（{涨跌幅}），{波动描述}，{成交描述}。`

### 8.2 三大指标的详细计算规则

| 指标 | 计算公式 | 分桶规则 | 显示文案 |
| ---- | -------- | -------- | -------- |
| **趋势分数** | `slope = LR(prices, N)`<br>`trend = clip(slope / max_slope * 5, -5, +5)` | -5~-2 → "明显下行"<br>-2~-0.5 → "小幅下行"<br>-0.5~+0.5 → "横盘整理"<br>+0.5~+2 → "小幅上行"<br>+2~+5 → "明显上行" | 附带解释："斜率 >0 表示整体向上趋势" |
| **波动等级** | `vol = std(log_returns)`<br>`z_score = (vol - mean_vol) / std_vol`<br>`level = map_to_1_5(z_score)` | Z < -1 → 1级 "极稳定"<br>-1~-0.5 → 2级 "较稳定"<br>-0.5~+0.5 → 3级 "正常"<br>+0.5~+1 → 4级 "较波动"<br>Z > +1 → 5级 "剧烈波动" | 附带解释："波动增大可能由大额交易引发" |
| **活跃度** | `vol_ratio = curr_vol / 24h_avg_vol`<br>`spread_ratio = curr_spread / 24h_avg_spread`<br>`activity = f(vol_ratio, spread_ratio)` | 综合得分 < 0.7 → 1级 "冷淡"<br>0.7~1.0 → 2级 "偏冷"<br>1.0~1.3 → 3级 "正常"<br>1.3~1.8 → 4级 "活跃"<br>> 1.8 → 5级 "火热" | 附带解释："成交增加可能放大短期波动" |

### 8.3 解释层的触发规则

| 触发场景 | 判断条件 | 输出模板 |
| -------- | -------- | -------- |
| **波动上升** | Δ波动 > 20% 且 Δ活跃度 > 15% | "波动上升可能与成交增加有关，说明市场目前处于敏感期" |
| **波动下降** | Δ波动 < -20% 且 Δ活跃度 < -15% | "波动下降可能与成交减少有关，说明市场目前较为平静" |
| **活跃度激增** | Δ活跃度 > 50% | "成交活跃度激增，说明市场正在吸引更多关注" |
| **趋势快速转向** | Δ趋势 > 2 且持续 > 5 分钟 | "趋势快速转向，可能由大单交易或市场消息推动" |
| **点差扩大** | Δ点差 > 30% | "点差扩大表明流动性降低，市场进入谨慎状态" |

### 8.4 火花线的技术实现

**数据点数量**：
- 15m：90 个点（每 10 秒 1 个）
- 1h：360 个点（每 10 秒 1 个）
- 24h：1440 个点（每 1 分钟 1 个，降采样）

**实现方式**：SVG Path 绘制，轻量级无依赖

### 8.5 风险提示区的完整规则表

| 市场状态组合 | 判断条件 | 提示文案 | 优先级 |
| ----------- | -------- | -------- | ------ |
| **极不稳定** | 波动 ≥ 4级 且 活跃度 ≥ 4级 | "⚠️ 波动上升，短线不稳定，建议谨慎观察" | 高 |
| **躁动期** | 波动 ≥ 3级 且 活跃度 ≥ 4级 | "💡 市场躁动期，参与请理性观察" | 中 |
| **极度平静** | 波动 ≤ 2级 且 活跃度 ≤ 2级 | "🔵 市场冷静，暂时缺乏方向性" | 低 |
| **趋势不明** | 趋势分数 ∈ [-0.5, +0.5] 且持续 > 10 分钟 | "⚪ 横盘整理中，等待市场选择方向" | 低 |
| **快速变化** | Δ趋势 > 2 且 Δ波动 > 20% | "⚡ 市场快速变化中，短期内波动可能较大" | 高 |
| **流动性差** | 点差扩大 > 30% | "❗ 流动性降低，买卖价差增大" | 中 |

**显示策略**：
- 同时满足多个条件时，显示优先级最高的提示
- 提示存在时效性，状态恢复后 3 分钟自动隐藏

---

## 9. 我们如何衡量成功

**成功的标准**：

| 指标             | 目标值        | 怎么衡量                 |
| ---------------- | ------------- | ------------------------ |
| **用户停留时间** | 超过 90 秒    | 看用户在页面待了多久     |
| **用户理解率**   | 80% 以上      | 用户访谈，看能不能说清楚 |
| **用户安心度**   | 70% 以上      | 用户调研，看是否更不焦虑 |
| **回头率**       | 30% 以上      | 看用户是否再次访问       |
| **分享率**       | 15% 以上      | 看用户是否复制摘要分享   |

如果达到这些目标，说明我们真的帮到了用户！

---

## 9. 开发计划（给团队看）

**预计总时间**：5 周（1 个月）

**分阶段推进**：

| 阶段      | 主要任务           | 谁来负责    | 多久完成 |
| --------- | ------------------ | ----------- | -------- |
| **第 1 周** | 搭建数据获取层     | 工程师      | 1 周     |
| **第 2 周** | 实现核心算法       | 工程师      | 1 周     |
| **第 3 周** | 开发界面           | 前端+产品   | 1 周     |
| **第 4 周** | 整合优化           | 工程师      | 1 周     |
| **第 5 周** | 测试上线           | 产品+工程师 | 1 周     |

**重要检查点**：
- ✅ 第 2 周末：核心算法完成，需要测试准确性
- ✅ 第 3 周末：界面完成，需要设计和交互评审
- ✅ 第 4 周末：整体完成，页面加载速度要快（首屏 2 秒内）

---

## 10. 未来会有什么功能

**未来版本规划**：

| 版本 | 想要实现的功能                     |
| ---- | ---------------------------------- |
| V2   | AI 智能解读：自动生成更详细的解释  |
| V3   | 情绪雷达：结合社交媒体看大家情绪   |
| V4   | AI 助手集成：让 AI 也能读懂市场    |
| V5   | 多语言支持：中文、英文、日文       |

这些都是后话，先做好 MVP 最重要！

---

## 11. 非功能需求

### 11.1 性能要求

| 指标 | 目标值 | 说明 |
| ---- | ------ | ---- |
| 首屏加载 | < 2 秒 | 关键渲染路径优化 |
| WebSocket 延迟 | < 100ms | 实时数据更新 |
| 页面响应 | < 100ms | 用户交互反馈 |
| 内存占用 | < 50MB | 长期运行不卡顿 |

### 11.2 可靠性要求

| 场景 | 处理策略 |
| ---- | -------- |
| WebSocket 断连 | 自动重连（指数退避，最大 5 次） |
| API 限流 | 智能降级，切换 REST 轮询 |
| 数据缺失 | 显示占位符，提示用户刷新 |
| 浏览器兼容 | 支持 Chrome 90+, Safari 14+, Firefox 88+ |

### 11.3 安全与隐私

| 要求 | 实施方式 |
| ---- | -------- |
| 无后端存储 | 纯前端应用，用户数据仅存本地 |
| HTTPS 强制 | 所有数据通过 HTTPS 传输 |
| 无用户跟踪 | 不使用 Cookie 或追踪脚本 |
| 合规声明 | 页脚包含免责声明 |

### 11.4 可维护性

| 要求 | 实施方式 |
| ---- | -------- |
| 代码规范 | ESLint + Prettier |
| 类型检查 | TypeScript strict 模式 |
| 测试覆盖 | 核心算法 ≥ 80% |
| 文档完善 | JSDoc + README |

---

## 12. 结语

> **HL 小白看市** 希望成为普通人与区块链世界之间的"理解层接口"。
> 它不鼓励投机，而是让人们在纷繁数据中找到节奏与意义。

---

## 附录 A：术语表（快速参考）

| 你可能看到的词 | 用大白话说是什么意思 |
| -------------- | -------------------- |
| 趋势           | 价格整体往哪个方向走 |
| 波动           | 价格变化得厉不厉害   |
| 活跃度         | 市场交易的人多不多   |
| 点差           | 买卖之间的价格差距   |
| 流动性         | 市场交易的人多不多   |
| 火花线         | 简单的价格走势图     |

---

## 附录 B：参考资料

- [Hyperliquid 官方文档](https://hyperliquid.gitbook.io/hyperliquid-docs)
- [Next.js 官方文档](https://nextjs.org/docs)
- [Tailwind CSS 官方文档](https://tailwindcss.com/docs)

---

## 版本历史

| 版本 | 日期       | 修改内容                                       | 修改人 |
| ---- | ---------- | ---------------------------------------------- | ------ |
| v1.2 | 2025-01-03 | 简化所有用户可见内容，去除技术术语，让小白也能懂 | -      |
| v1.1 | 2025-01-03 | 补充算法细节、技术架构、非功能需求             | -      |
| v1.0 | 2025-11-03 | 初版 PRD                                       | -      |

